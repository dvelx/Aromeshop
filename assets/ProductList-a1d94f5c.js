import{d as I,i as c,b as E,o as l,c as n,e,f as w,w as T,T as P,C as U,D as b,E as B,F as h,j as C,q as V,G as M,t as k,H,p as D,h as N,_ as L,l as Y,m as q,n as A,r as G,u as Z,g as z,a as J}from"./index-5083176d.js";import{n as K}from"./numberFormatter-3e9f9747.js";const a=r=>(D("data-v-6dd1c8b4"),r=r(),N(),r),O={class:"filter"},Q=a(()=>e("h2",{class:"filter__title"},"Фильтровать",-1)),R={class:"form__block"},W={class:"form__label form__label-select sort-products"},X={class:"form__block"},ee=a(()=>e("legend",{class:"form__legend"},"Цена",-1)),te={class:"form__label form__label--price"},se=a(()=>e("span",{class:"form__value"},"От",-1)),oe={class:"form__label form__label--price"},le=a(()=>e("span",{class:"form__value"},"До",-1)),ne={class:"form__block"},ae=a(()=>e("legend",{class:"form__legend"},"Категория",-1)),ce={class:"form__label form__label--select"},_e={class:"form__select",name:"category"},ie=a(()=>e("option",{value:"0"},"Все категории",-1)),re=["value"],de={class:"form__block"},ue=a(()=>e("legend",{class:"form__legend"},"Коллекция",-1)),pe={class:"check-list"},ve={class:"check-list__label"},me=a(()=>e("input",{class:"check-list__check sr-only",type:"checkbox"},null,-1)),fe={class:"check-list__desc"},be=a(()=>e("button",{class:"filter__submit",type:"submit"},"Применить",-1)),he={key:0,class:"filter-mobile"},ke=a(()=>e("h2",{class:"filter__title"},"Фильтровать",-1)),ye={class:"form__block"},ge={class:"form__label form__label-select sort-products"},$e={class:"form__block"},Ce=a(()=>e("legend",{class:"form__legend"},"Цена",-1)),xe={class:"form__label form__label--price"},we=a(()=>e("span",{class:"form__value"},"От",-1)),Fe={class:"form__label form__label--price"},Be=a(()=>e("span",{class:"form__value"},"До",-1)),Te={class:"form__block"},Se=a(()=>e("legend",{class:"form__legend"},"Категория",-1)),Pe={class:"form__label form__label--select"},Ve={class:"form__select",name:"category"},Me=a(()=>e("option",{value:"0"},"Все категории",-1)),Ue=["value"],Ie={class:"form__block"},De=a(()=>e("legend",{class:"form__legend"},"Коллекция",-1)),Ne={class:"check-list"},Le={class:"check-list__label"},je=a(()=>e("input",{class:"check-list__check sr-only",type:"checkbox"},null,-1)),Ee={class:"check-list__desc"},He=I({__name:"FilteredProducts",props:{priceFrom:{},priceTo:{},sortBy:{},order:{}},emits:["update:priceFrom","update:priceTo","update:sortBy","update:order"],setup(r,{emit:y}){const u=c(!1),p=c(0),d=c(0),g=c({}),v=c({}),i=c(!1),m=()=>{i.value=!i.value},_=(o,s)=>{y("update:order",s),y("update:sortBy",o),x(),i.value=!1},$=()=>{V.getCategories().then(o=>g.value=o.data)},S=()=>{V.getBrands().then(o=>v.value=o.data)},F=()=>{document.body.style.position="fixed",document.body.style.top=`-${window.screenY}px`,u.value=!0},x=()=>{const o=document.body.style.top;document.body.style.position="",document.body.style.top="",window.scrollTo(0,parseInt(o||"0")*-1),u.value=!1},f=()=>{y("update:priceFrom",p.value),y("update:priceTo",d.value),u.value=!1};return E(()=>{$(),S()}),(o,s)=>(l(),n(h,null,[e("div",O,[Q,e("fieldset",R,[e("div",{class:"form__legend sort__btn-open",onClick:m},"Сортировать ↑ ↓"),w(P,{name:"sort"},{default:T(()=>[b(e("label",W,[e("div",{class:"sort__btn",onClick:s[0]||(s[0]=t=>_("price","desc"))},"Сначала дороже"),e("div",{class:"sort__btn",onClick:s[1]||(s[1]=t=>_("price","asc"))},"Сначала дешевле"),e("div",{class:"sort__btn",onClick:s[2]||(s[2]=t=>_("name","asc"))},"По названию ↑"),e("div",{class:"sort__btn",onClick:s[3]||(s[3]=t=>_("name","desc"))},"По названию ↓")],512),[[M,i.value]])]),_:1})]),e("form",{action:"#",class:"filter__form form",method:"get",onSubmit:s[6]||(s[6]=U(t=>f(),["prevent"]))},[e("fieldset",X,[ee,e("label",te,[b(e("input",{"onUpdate:modelValue":s[4]||(s[4]=t=>p.value=t),class:"form__input",type:"text",name:"min-price",autocomplete:"off"},null,512),[[B,p.value,void 0,{number:!0}]]),se]),e("label",oe,[b(e("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>d.value=t),class:"form__input",type:"text",name:"max-price",autocomplete:"off"},null,512),[[B,d.value,void 0,{number:!0}]]),le])]),e("fieldset",ne,[ae,e("label",ce,[e("select",_e,[ie,(l(!0),n(h,null,C(g.value,t=>(l(),n("option",{key:t.id,value:t.id},k(t.title),9,re))),128))])])]),e("fieldset",de,[ue,e("ul",pe,[(l(!0),n(h,null,C(v.value,t=>(l(),n("li",{key:t.id,class:"check-list__item"},[e("label",ve,[me,e("span",fe,k(t.title),1)])]))),128))])]),be],32)]),e("button",{class:"filter-mobile__btn-open",onClick:s[7]||(s[7]=t=>F())}," Фильтры "),w(P,{name:"slide"},{default:T(()=>[u.value?(l(),n("div",he,[ke,e("button",{class:"filter-mobile__btn-close",onClick:x}),e("fieldset",ye,[e("div",{class:"form__legend",onClick:m},"Сортировать ↑ ↓"),w(P,{name:"sort"},{default:T(()=>[b(e("label",ge,[e("div",{class:"sort__btn",onClick:s[8]||(s[8]=t=>_("price","desc"))},"Сначала дороже"),e("div",{class:"sort__btn",onClick:s[9]||(s[9]=t=>_("price","asc"))},"Сначала дешевле"),e("div",{class:"sort__btn",onClick:s[10]||(s[10]=t=>_("name","asc"))},"По названию ↑"),e("div",{class:"sort__btn",onClick:s[11]||(s[11]=t=>_("name","desc"))},"По названию ↓")],512),[[M,i.value]])]),_:1})]),e("form",{action:"#",class:"filter__form form",method:"get",onSubmit:s[14]||(s[14]=U(t=>f(),["prevent"]))},[e("fieldset",$e,[Ce,e("label",xe,[b(e("input",{"onUpdate:modelValue":s[12]||(s[12]=t=>p.value=t),class:"form__input",type:"text",name:"min-price",autocomplete:"off"},null,512),[[B,p.value,void 0,{number:!0}]]),we]),e("label",Fe,[b(e("input",{"onUpdate:modelValue":s[13]||(s[13]=t=>d.value=t),class:"form__input",type:"text",name:"max-price",autocomplete:"off"},null,512),[[B,d.value,void 0,{number:!0}]]),Be])]),e("fieldset",Te,[Se,e("label",Pe,[e("select",Ve,[Me,(l(!0),n(h,null,C(g.value,t=>(l(),n("option",{key:t.id,value:t.id},k(t.title),9,Ue))),128))])])]),e("fieldset",Ie,[De,e("ul",Ne,[(l(!0),n(h,null,C(v.value,t=>(l(),n("li",{key:t.id,class:"check-list__item"},[e("label",Le,[je,e("span",Ee,k(t.title),1)])]))),128))])]),e("button",{class:"filter__submit",type:"submit",onClick:x}," Применить ")],32)])):H("",!0)]),_:1})],64))}});const Ye=L(He,[["__scopeId","data-v-6dd1c8b4"]]),j=r=>(D("data-v-d9113901"),r=r(),N(),r),qe={class:"product-list"},Ae=j(()=>e("div",{class:"top container"},[e("h1",{class:"top__title"},"Каталог товаров")],-1)),Ge={class:"container product-list__container"},Ze={class:"product-list__content"},ze={key:0,class:"product-list__list"},Je=J('<div class="skeleton-image" data-v-d9113901></div><div class="skeleton-desc" data-v-d9113901><div class="skeleton-title" data-v-d9113901></div><div class="skeleton-text" data-v-d9113901></div><div class="skeleton-price" data-v-d9113901></div></div><div class="skeleton-btn" data-v-d9113901></div>',3),Ke=[Je],Oe={key:1,class:"product-list__list"},Qe=["src"],Re={class:"card__desc"},We={class:"card__title"},Xe={class:"card__text"},et={class:"card__price"},tt=["onClick"],st=j(()=>e("svg",{width:"30",height:"30",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21Z",fill:"#0C0D12"}),e("path",{d:"M9 12H15",stroke:"white","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M12 9V15",stroke:"white","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),ot={class:"show-more-btn"},lt=I({__name:"ProductList",setup(r){const y=Y(),u=c(!0),p=c(!0),d=c({}),g=c(1),v=c(8),i=c(""),m=c(""),_=c(0),$=c(1e5),S=q(()=>d.value),F=()=>{V.getAll(v.value,g.value,i.value,m.value,_.value,$.value).then(f=>d.value=f.data).then(()=>u.value=!1)},x=(f,o)=>{y.addProductToCart(f,o)};return A([g,v,_,$,i,m],()=>{F()}),F(),(f,o)=>{const s=G("router-link");return l(),n("section",qe,[Ae,e("div",Ge,[w(Ye,{priceFrom:_.value,"onUpdate:priceFrom":o[0]||(o[0]=t=>_.value=t),priceTo:$.value,"onUpdate:priceTo":o[1]||(o[1]=t=>$.value=t),"sort-by":i.value,"onUpdate:sortBy":o[2]||(o[2]=t=>i.value=t),order:m.value,"onUpdate:order":o[3]||(o[3]=t=>m.value=t)},null,8,["priceFrom","priceTo","sort-by","order"]),e("div",Ze,[u.value?(l(),n("div",ze,[(l(!0),n(h,null,C(v.value,t=>(l(),n("div",{key:t,class:"card skeleton"},Ke))),128))])):(l(),n("div",Oe,[(l(!0),n(h,null,C(S.value,t=>(l(),n("div",{key:t.id,class:"card"},[w(s,{to:"/product/"+t.slug},{default:T(()=>[e("img",{src:t.image,alt:"",class:"card__image"},null,8,Qe)]),_:2},1032,["to"]),e("div",Re,[e("h5",We,k(t.title),1),e("p",Xe,k(t.Brand.title),1),e("p",et," Цена: "+k(Z(K)(t.price))+" ₽ ",1)]),e("button",{class:"card__btn btn",onClick:nt=>x(t.id,1)},[z(" В КОРЗИНУ "),st],8,tt)]))),128))])),b(e("button",ot," показать еще ",512),[[M,p.value]])])])])}}});const _t=L(lt,[["__scopeId","data-v-d9113901"]]);export{_t as default};

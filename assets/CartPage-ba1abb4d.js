import{B as b}from"./BaseCounter-d1ac017d.js";import{d as f,l as P,m as i,o as r,c as n,e as t,t as _,f as m,_ as g,r as k,w as h,F as C,j as $,g as v,u as B,B as I,p as S,h as x}from"./index-5083176d.js";import{n as y}from"./numberFormatter-3e9f9747.js";const w={class:"cart-item__wrapper"},T={class:"cart-item__image-block"},q=["src","alt"],F={class:"cart-item__right"},N={class:"cart-item__name-and-article-block"},V={class:"cart-item__title"},j={class:"cart-item__code"},O={class:"cart-item__quantity-price"},Q={class:"cart-item__actions-container"},A={class:"cart-item__price"},D={class:"cart-item__main-value"},E=f({__name:"CartItem",props:{item:{}},setup(o){const s=o,c=P(),l=i(()=>y(s.item.quantity*s.item.Product.price)),d=i({get(){return s.item.quantity},set(e){c.updateCartProductQuantity(s.item.Product.id,e)}}),p=e=>c.deleteProduct(e);return(e,a)=>(r(),n("li",w,[t("div",T,[t("img",{src:e.item.Product.image,alt:e.item.Product.title},null,8,q)]),t("div",F,[t("div",N,[t("h3",V,_(e.item.Product.title),1),t("span",j," Артикул: "+_(e.item.Product.id),1)]),t("div",O,[t("div",Q,[m(b,{amount:d.value,"onUpdate:amount":a[0]||(a[0]=u=>d.value=u),class:"cart-item__counter"},null,8,["amount"]),t("button",{class:"cart-item__action-del",style:{cursor:"pointer"},type:"button","aria-label":"Удалить товар из корзины",onClick:a[1]||(a[1]=u=>p(e.item.Product.id))}," Удалить ")]),t("div",A,[t("span",D,_(l.value)+" ₽ ",1)])])])]))}});const K=g(E,[["__scopeId","data-v-160f7e6a"]]),L=o=>(S("data-v-83f9eaa1"),o=o(),x(),o),U={key:0},z={class:"container error-container"},G=L(()=>t("h1",{class:"error-server",style:{"text-align":"center","margin-bottom":"40px"}}," Ваша корзина пуста ",-1)),H={key:1,class:"cart"},J={class:"container cart__container"},M={class:"cart__form form",action:"#",method:"POST"},R={class:"cart__field"},W={class:"cart__list"},X={class:"cart__block"},Y={class:"cart__price"},Z=["disabled","onClick"],tt=f({__name:"CartPage",setup(o){const s=P(),c=i(()=>s.state.cartProduct),l=i(()=>s.cartTotalPrice());return s.loadBasket(s.state.userAccessKey),(d,p)=>{const e=k("router-link");return Object.keys(c.value).length==0?(r(),n("section",U,[t("div",z,[G,m(e,{to:"/catalog",class:"right__btn btn"},{default:h(()=>[v("Смотреть товары")]),_:1})])])):(r(),n("section",H,[t("div",J,[t("form",M,[t("div",R,[t("ul",W,[(r(!0),n(C,null,$(c.value,a=>(r(),I(K,{key:a.Product.id,item:a},null,8,["item"]))),128))])]),t("div",X,[t("p",Y,[v(" Итого: "),t("span",null,_(B(y)(l.value))+" ₽",1)]),m(e,{to:"/order"},{default:h(({navigate:a})=>[t("button",{class:"cart__button",type:"submit",disabled:c.value.length===0,onClick:u=>{a()}}," Оформить заказ ",8,Z)]),_:1})])])])]))}}});const ot=g(tt,[["__scopeId","data-v-83f9eaa1"]]);export{ot as default};
